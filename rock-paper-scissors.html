<!DOCTYPE html>
<html>
<head>
    Rock Paper Scissors
</head>
<body>
<script>

function computerPlay() {  
    //selects computers move
    let rand = Math.random();
    if (rand < 0.334) {
        return 'rock';
    } else if (rand < 0.667) {
        return 'paper' ;
    } else { return 'scissors' } ;  
}

function playRound(playerSelection, computerSelection) { 
    //determines winner of each round and keeps score
    if (playerSelection == computerSelection) {
        return 'Draw!' ;
    } else if  (playerSelection == 'rock' && computerSelection == 'paper') {
        return computerScore++ , 'You Lose! Paper beats Rock' ;
    } else if (playerSelection == 'rock' && computerSelection == 'scissors') {
        return playerScore++ , 'You Win! Rock beats Scissors' ;
    } else if (playerSelection == 'paper' && computerSelection == 'rock') {
        return playerScore++ , 'You Win! Paper beats Rock' ;
    } else if (playerSelection == 'paper' && computerSelection == 'scissors') {
        return computerScore++, 'You Lose! Scissors beats Paper' ;
    } else if (playerSelection == 'scissors' && computerSelection == 'rock') {
        return computerScore++, 'You Lose! Rock beats Scissors' ;
    } else if (playerSelection == 'scissors' && computerSelection == 'paper') {
        return playerScore++ , 'You Win! Scissors beats Paper' ;
    } else { return 'Input Error' }
      }

let playerScore = 0 ;
let computerScore = 0 ;

function finalScore(playerScore, computerScore) {
    //message based on final score
    if (playerScore == computerScore) {
        return 'Tie game.' ;
    } else if (playerScore > computerScore) {
        return 'You Win!' ;
    } else { return 'You Lose.' ; }
}


function playerInput() {
    //prompts user to select their move
    selection = window.prompt('Please choose: Rock, Paper, Scissors?', '') ;
    return selection.toLowerCase() ; //lowercase so playRound can accept input
}

function game() {
    //runs playRound 5 times, alerts final score, resets scores to 0, relaunches intro prompt
    let i;
    for (i = 0; i < 5; i++) {
        let playerSelection = playerInput();
        let computerSelection = computerPlay();
        alert(playRound(playerSelection, computerSelection));
        }
    alert(finalScore(playerScore, computerScore) + ' Final score, You: ' + playerScore +  ' Computer: ' + computerScore) ;
    playerScore = 0 ;
    computerScore = 0 ;
    runOnLaunch()
}

function runOnLaunch() {
    //intro prompt
    newGame = window.prompt('Would you like to play Rock, Paper, Scissors? (y / n)', 'y');
    newGameInput = newGame.toLowerCase() ;
    if (newGameInput == 'y') {
        return game() ;
    } else if (newGameInput == 'n') {
        alert('Ok, let me know when you want to play!') ;
        return runOnLaunch() ;
    } else { alert('Please resubmit with a valid respons: \'y\' or \'n\'') ;
             return runOnLaunch() ; }
}

runOnLaunch()



</script>
</body>
</html>